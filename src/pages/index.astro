---
import Layout from "@layouts/Layout.astro";
import site from "../config/site";
import style from "../styles/archive.module.css";
// import landingStyle from "../styles/landing.module.css";
import { getCollection } from "astro:content";

// ðŸ”¹ Get all content collections (e.g., articles, notes, works, etc.)
const posts = await getCollection("articles");
const notes = await getCollection("notes");
// const works = await getCollection("works");

// ðŸ”¹ Combine everything into one big list
const allEntries = [...posts, ...notes];

// ðŸ”¹ Extract unique tags from frontmatter
const tags = Array.from(
  new Set(
    allEntries.flatMap((entry) => entry.data.tags || [])
  )
).sort();
---
<style>
  

  .demo-wrap { max-width: 900px; margin: 0 auto; padding-bottom: 2.5rem; }

  /* ===== the working tag cloud CSS ===== */
  ul.gridListExpanded {
    display: flex;
    flex-wrap: wrap;               /* allow multiple tags per row */
    justify-content: center;       /* center each row as a group */
    gap: 8px 14px;                 /* row-gap | column-gap (edge-to-edge) */
    padding: 0;
    margin: 0;
    list-style: none;
  }

  ul.gridListExpanded li {
    flex: 0 0 auto;                /* do not shrink or grow to fill the row */
    display: inline-flex;
    margin: 0;                     /* spacing handled by gap */
  }

  /* override common interfering rules (bootstrap/theme .btn etc.) */
  ul.gridListExpanded a,
  ul.gridListExpanded .btn {
    display: inline-block !important;
    width: auto !important;        /* prevents width:100% from taking effect */
    min-width: 0;                  /* prevents minimum width from causing one-per-row */
    padding: 6px 12px;
    white-space: nowrap;
    text-decoration: none;
    border-radius: 8px;
    font-weight: 600;
    
  }

  /* small responsive tweak */
  @media (max-width: 420px) {
    ul.gridListExpanded { gap: 6px 8px; }
    ul.gridListExpanded a { padding: 5px 8px; font-size: 14px; }
  }
</style>

<Layout
  description={site.description}
  pageType="home"
  includeLocalBusiness={true}
  path="/"
>
  <main id="main" class={style.main}>

    <div class={style.content}>
      <h2 class={style.subHeading}>
        <span>All Tags</span>
      </h2>
    <div class="demo-wrap">
      <ul class="gridListExpanded">
        {tags.map((tag) => (
          <li id={tag}>
            <a href={`/tag/${tag}/`} class="btn">
              #{tag}
            </a>
          </li>
        ))}
      </ul>
    </div>
    </div>
  </main>
</Layout>
